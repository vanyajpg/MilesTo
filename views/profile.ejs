<%- include('partials/header') -%>
<%- include('partials/app-content') -%>


<body class="bg-[#ffffff] text-emerald-800">
    <div class="">
      <div class="flex grid-cols-2">
          <div class="flex-1"> 
              <div class="">
                  <h1 class="text-3xl pt-8 capitalize text-center"><strong>Greetings <%= user.userName %>!</strong></h1>
              </div>
              <div class="columns-2 h-96 mt-12">
                       <% let totalCount = 0; %>
                      <% posts.reverse().forEach(post => { %>
                        <% totalCount += post.count; %>
                      <% }); %>
                      <div class="ml-6 border-2 h-80  border-[#cce1cc]  ">
                            <h1 class="text-center text-2xl mb-3 mt-6 ">Your Totals:</h1>
                          <div class="text-center text-3xl font-semibold mt-10 ">
                              <p><%= totalCount %> steps</p>
                              <% let totalMiles = (totalCount / 2000).toFixed(1); %>
                              <p class="mt-4"><%= totalMiles %> miles</p>
                          </div>
                      </div>
                    <div class="mr-6 border-2 h-80 border-[#cce1cc] text-center">
                        <h2 class=""></h2>
                            <form action="/post/createPost" enctype="multipart/form-data" method="POST" class="">
                                <div class="capitalize text-center text-2xl mb-3 mt-16">
                                  <label for="count" class="h-10">number of steps you walked today:</label>
                                </div>
                                <div class="text-center block text-gray-700 text-sm font-semibold mb-2">
                                    <input type="text" class=" h-8 bg-[#dde8dd]" id="count" name="count">
                                </div>
                                <button type="submit" class=" mt-2 uppercase" value="Upload">submit </button>
                            </form>
                    </div> 
              </div>
              <!-- <ul class="row list-unstyled ml-96">
                <% for(var i=0; i<posts.length; i++) {%>
                  <li class="col-6 justify-content-between mt-5">
                    <div class="text-center">
                      <div class="flex flex-row mb-1 justify-around bg-[#cbd5d6] w-64 mt-2">
                        <label for="date" class="form-label p-2 border uppercase text-center font-semibold flex-grow basis-0 border-white"><%= posts[i].date.toDateString()  %></label>
                        </div>
                      <div class="flex flex-center h-16 text-md">
                        <span class="bg-[#cce1cc] form-control mb-1 w-64 p-4"><%= posts[i].count %> steps</span>
                      </div>
                  </li>
                <% } %>
                </ul> --> 
                <div class="absolute bottom-0 right-0 mb-10 mr-10">
                  <button class=" bg-emerald-800 hover:bg-[#cce1cc] text-white font-semibold hover:text-emerald-800 py-2 px-4 border border-emerald-800 hover:border-transparent rounded">
                    <a href="/logout">LOGOUT</a>
                  </button>
                </div> 
      </div>
    </div>
  </body>
  